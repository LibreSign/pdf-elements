(()=>{"use strict";var e={5316(e,t,i){var s=i(5471),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-shell"},[t("AppToolbar",{attrs:{loading:e.loading,"is-ready":e.isReady,"is-adding-element":e.isAddingElement},on:{"load-sample":e.loadSample,"files-change":e.onFilesChange,"add-signature":e.startAddingSignature,"show-objects":e.showObjects,"clear-all":e.clearAll}}),t("DocumentsList",{attrs:{documents:e.fileNames},on:{remove:e.removeDocument}}),t("section",{staticClass:"viewer"},[t("PDFElements",{key:e.componentKey,ref:"pdf",attrs:{"init-files":e.initFiles,"init-file-names":e.fileNames,"initial-scale":1.1},on:{"pdf-elements:end-init":e.onReady},scopedSlots:e._u([{key:"element-signature",fn:function({object:i}){return[t("SignatureBox",{style:{fontSize:e.getResponsiveFontSize(i)},attrs:{object:i}})]}},{key:"custom",fn:function({object:i}){return[t("SignatureBox",{style:{fontSize:e.getResponsiveFontSize(i)},attrs:{object:i}})]}},{key:"actions",fn:function({onDelete:e}){return[t("DeleteButton",{on:{delete:e}})]}}])})],1),e.showElementsViewer&&e.pdf?t("ElementsViewer",{attrs:{"is-open":e.showElementsViewer,documents:e.pdf.pdfDocuments},on:{close:function(t){e.showElementsViewer=!1}}}):e._e()],1)},a=[],o=(i(8111),i(2489),i(1701),function(){var e=this,t=e._self._c;return t("div",{staticClass:"pdf-elements-root",style:{width:e.width,height:e.height}},[e.pdfDocuments.length?t("div",{staticClass:"pages-container"},e._l(e.pdfDocuments,function(i,s){return t("div",{key:s},e._l(i.pages,function(n,a){return t("div",{key:`${s}-${a}`,staticClass:"page-slot"},[t("div",{staticClass:"page-wrapper",on:{mousedown:function(t){return e.selectPage(s,a)},touchstart:function(t){return e.selectPage(s,a)}}},[t("div",{staticClass:"page-canvas",class:{"shadow-outline":s===e.selectedDocIndex&&a===e.selectedPageIndex}},[t("PDFPage",{ref:`page${s}-${a}`,refInFor:!0,attrs:{page:n,scale:e.scale},on:{onMeasure:function(t){return e.onMeasure(t,s,a)}}}),t("div",{staticClass:"overlay",on:{mousemove:e.handleMouseMove,touchmove:e.handleMouseMove}},[e.isAddingMode&&e.previewPageDocIndex===s&&e.previewPageIndex===a&&e.previewElement&&e.previewVisible?t("div",{staticClass:"preview-element",style:{left:e.previewPosition.x*e.previewScale.x+"px",top:e.previewPosition.y*e.previewScale.y+"px",width:e.previewElement.width*e.previewScale.x+"px",height:e.previewElement.height*e.previewScale.y+"px"}},[e._t(e.previewElement.type?`element-${e.previewElement.type}`:"custom",function(){return[e._t("custom",null,{object:e.previewElement,isSelected:!1})]},{object:e.previewElement,isSelected:!1})],2):e._e(),e._l(i.allObjects[a],function(i){return t("DraggableElement",{key:i.id,ref:`draggable${s}-${a}-${i.id}`,refInFor:!0,attrs:{object:i,"pages-scale":e.getDisplayedPageScale(s,a),"page-width":e.getPageWidth(s,a),"page-height":e.getPageHeight(s,a),"read-only":e.readOnly,"on-update":t=>e.updateObject(s,i.id,t),"on-delete":()=>e.deleteObject(s,i.id),"on-drag-start":(t,n,o,r)=>e.startDraggingElement(s,a,i,t,n,o,r),"on-drag-move":e.updateDraggingPosition,"on-drag-end":e.stopDraggingElement,"is-being-dragged-globally":e.isDraggingElement&&e.draggingObject&&e.draggingObject.id===i.id,"dragging-client-pos":e.draggingClientPosition,"current-doc-index":s,"current-page-index":a,"global-drag-doc-index":e.draggingDocIndex,"global-drag-page-index":e.draggingPageIndex,"show-selection-ui":e.showSelectionHandles&&!e.hideSelectionUI&&!1!==i.resizable,"show-default-actions":e.showElementActions&&!e.hideSelectionUI},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t(t.object.type?`element-${t.object.type}`:"custom",function(){return[e._t("custom",null,{object:t.object,onDelete:t.onDelete,onResize:t.onResize})]},{object:t.object,onDelete:t.onDelete,onResize:t.onResize})]}},{key:"actions",fn:function(t){return[e._t("actions",null,{object:t.object,onDelete:t.onDelete})]}}],null,!0)})})],2)],1),e.showPageFooter?t("div",{staticClass:"page-footer"},[t("span",[e._v(e._s(i.name))]),t("span",[e._v(e._s(e.formatPageNumber(a+1,i.numPages)))])]):e._e()])])}),0)}),0):e._e(),e.isDraggingElement&&e.draggingObject?t("div",{staticClass:"drag-portal",style:{position:"fixed",left:`${e.draggingClientPosition.x}px`,top:`${e.draggingClientPosition.y}px`,width:e.draggingObject.width*e.draggingScale+"px",height:e.draggingObject.height*e.draggingScale+"px",pointerEvents:"none"}},[e._t(e.draggingObject.type?`element-${e.draggingObject.type}`:"custom",function(){return[e._t("custom",null,{object:e.draggingObject,isSelected:!1})]},{object:e.draggingObject,isSelected:!1})],2):e._e()])}),r=[],l=(i(4114),i(116),i(531),i(7588),i(3579),function(){var e=this,t=e._self._c;return t("canvas",{ref:"canvas"})}),h=[];const d={name:"PDFPage",props:{page:{type:Promise,required:!0},scale:{type:Number,default:1}},data(){return{dynamicScale:this.scale,isRendering:!1,pendingRender:!1,renderTask:null}},watch:{scale(e){this.dynamicScale=e,this.render()}},mounted(){this.render()},beforeUnmount(){if(this.renderTask){try{this.renderTask.cancel()}catch(e){}this.renderTask=null}},methods:{getCanvasMeasurement(){return{canvasWidth:this.$refs.canvas.width,canvasHeight:this.$refs.canvas.height}},measure(){this.$emit("onMeasure",{scale:this.dynamicScale})},async render(){if(this.isRendering)this.pendingRender=!0;else{this.isRendering=!0,this.pendingRender=!1;try{const t=await this.page,i=this.$refs.canvas;if(!i)return;if(this.renderTask){try{this.renderTask.cancel()}catch(e){}this.renderTask=null}const s=i.getContext("2d"),n=t.getViewport({scale:this.dynamicScale});i.width=n.width,i.height=n.height,this.renderTask=t.render({canvasContext:s,viewport:n}),await this.renderTask.promise,this.measure()}finally{this.isRendering=!1,this.renderTask=null,this.pendingRender&&(this.pendingRender=!1,this.render())}}}}},c=d;var g=i(1656),u=(0,g.A)(c,l,h,!1,null,"acf7a444",null);const p=u.exports;var f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"draggable-wrapper"},[e.isSelected&&!e.isBeingDraggedGlobally&&e.showSelectionUi&&e.showDefaultActions?t("div",{staticClass:"actions-toolbar",style:e.toolbarStyle},[e._t("actions",function(){return[t("button",{staticClass:"action-btn",attrs:{type:"button",title:"Delete"},on:{click:function(t){return t.stopPropagation(),e.onDelete.apply(null,arguments)}}},[t("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"}},[t("path",{attrs:{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.5a.5.5 0 0 0 0 1h.5v10.5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5V3.5h.5a.5.5 0 0 0 0-1H11Zm1 1v10.5a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V3.5h8Z"}})])])]},{object:e.object,onDelete:e.onDelete})],2):e._e(),t("div",{staticClass:"draggable-element",class:{selected:e.isSelected&&e.showSelectionUi},style:[e.elementStyle,e.dragElementStyle],attrs:{draggable:"false"},on:{dragstart:function(e){e.preventDefault()},mousedown:e.handleElementClick,touchstart:e.handleElementClick}},[e._t("default",null,{object:e.object,isSelected:e.isSelected,onDelete:e.onDelete,onResize:e.startResizeFromSlot}),e.isSelected&&e.showSelectionUi?e._l(e.resizeDirections,function(i){return t("button",{key:i,staticClass:"resize-handle",class:`handle-${i}`,attrs:{type:"button"},on:{mousedown:function(t){return t.stopPropagation(),t.preventDefault(),e.startResize(i,t)},touchstart:function(t){return t.stopPropagation(),t.preventDefault(),e.startResize(i,t)}}})}):e._e()],2)])},m=[];const v={name:"DraggableElement",props:{object:{type:Object,required:!0},pagesScale:{type:Number,default:1},pageWidth:{type:Number,required:!0},pageHeight:{type:Number,required:!0},onUpdate:{type:Function,default:()=>{}},onDelete:{type:Function,default:()=>{}},onDragStart:{type:Function,default:()=>{}},onDragMove:{type:Function,default:()=>{}},onDragEnd:{type:Function,default:()=>{}},isBeingDraggedGlobally:{type:Boolean,default:!1},draggingClientPos:{type:Object,default:()=>({x:0,y:0})},currentDocIndex:{type:Number,default:-1},currentPageIndex:{type:Number,default:-1},globalDragDocIndex:{type:Number,default:-1},globalDragPageIndex:{type:Number,default:-1},showSelectionUi:{type:Boolean,default:!0},showDefaultActions:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1}},data(){return{isSelected:!1,mode:"idle",direction:"",startX:0,startY:0,startLeft:0,startTop:0,startWidth:0,startHeight:0,offsetX:0,offsetY:0,resizeOffsetX:0,resizeOffsetY:0,resizeOffsetW:0,resizeOffsetH:0,aspectRatio:1,lastMouseX:0,lastMouseY:0,pointerOffsetDoc:{x:0,y:0},currentPageRect:null,rafId:null}},computed:{resizeDirections(){return["top-left","top-right","bottom-left","bottom-right"]},elementStyle(){const e=this.pagesScale||1,t="drag"===this.mode,i="resize"===this.mode,s=t?this.offsetX:0,n=t?this.offsetY:0,a=i?this.resizeOffsetX:0,o=i?this.resizeOffsetY:0,r=i?this.resizeOffsetW:0,l=i?this.resizeOffsetH:0,h=this.object.x+s+a,d=this.object.y+n+o,c=this.object.width+r,g=this.object.height+l;return{left:h*e+"px",top:d*e+"px",width:c*e+"px",height:g*e+"px",pointerEvents:this.readOnly?"none":"auto"}},toolbarStyle(){const e=this.pagesScale||1,t="drag"===this.mode,i="resize"===this.mode,s=t?this.offsetX:0,n=t?this.offsetY:0,a=i?this.resizeOffsetX:0,o=i?this.resizeOffsetY:0,r=i?this.resizeOffsetW:0,l=this.object.x+s+a,h=this.object.y+n+o,d=this.object.width+r;return{left:(l+d/2)*e+"px",top:(h-60)*e+"px",transform:"translateX(-50%)"}},dragElementStyle(){return this.isBeingDraggedGlobally&&this.draggingClientPos?{opacity:0,pointerEvents:"none"}:{}}},mounted(){this.handleClickOutside=this.handleClickOutside.bind(this),this.boundHandleMove=this.handleMove.bind(this),this.boundStopInteraction=this.stopInteraction.bind(this),document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside),window.removeEventListener("mousemove",this.boundHandleMove),window.removeEventListener("mouseup",this.boundStopInteraction),window.removeEventListener("touchmove",this.boundHandleMove),window.removeEventListener("touchend",this.boundStopInteraction),this.rafId&&cancelAnimationFrame(this.rafId)},methods:{handleElementClick(e){this.readOnly||e.target.closest(".delete-handle")||e.target.closest("[data-stop-drag]")||e.target.closest(".actions-toolbar")||(e.preventDefault(),this.isSelected=!0,this.startDrag(e))},handleClickOutside(e){this.$el&&!this.$el.contains(e.target)&&(this.isSelected=!1)},startResizeFromSlot(e,t){e&&t&&this.startResize(e,t)},startDrag(e){if(this.readOnly)return;if(e.target.classList.contains("delete"))return;if(e.target.classList.contains("resize-handle"))return;this.mode="drag",this.startX=e.type.includes("touch")?e.touches[0].clientX:e.clientX,this.startY=e.type.includes("touch")?e.touches[0].clientY:e.clientY,this.startLeft=this.object.x,this.startTop=this.object.y,this.offsetX=0,this.offsetY=0,this.resetResizeOffsets();const t=this.$el.querySelector(".draggable-element").getBoundingClientRect();this.pointerOffsetDoc.x=this.startX-t.left,this.pointerOffsetDoc.y=this.startY-t.top;const i=this.capturePageRect();this.currentPageRect=i;let s={x:0,y:0};if(i){const e=i.left+this.object.x*this.pagesScale,n=i.top+this.object.y*this.pagesScale;s={x:t.left-e,y:t.top-n}}this.onDragStart(this.startX,this.startY,{...this.pointerOffsetDoc},s),window.addEventListener("mousemove",this.boundHandleMove),window.addEventListener("mouseup",this.boundStopInteraction),window.addEventListener("touchmove",this.boundHandleMove),window.addEventListener("touchend",this.boundStopInteraction)},startResize(e,t){this.readOnly||(this.mode="resize",this.direction=e,this.startX=t.type.includes("touch")?t.touches[0].clientX:t.clientX,this.startY=t.type.includes("touch")?t.touches[0].clientY:t.clientY,this.startLeft=this.object.x,this.startTop=this.object.y,this.startWidth=this.object.width,this.startHeight=this.object.height,this.aspectRatio=this.startWidth/this.startHeight,this.offsetX=0,this.offsetY=0,this.resetResizeOffsets(),window.addEventListener("mousemove",this.boundHandleMove),window.addEventListener("mouseup",this.boundStopInteraction),window.addEventListener("touchmove",this.boundHandleMove),window.addEventListener("touchend",this.boundStopInteraction))},handleMove(e){"idle"!==this.mode&&(e.preventDefault(),this.rafId||(this.rafId=requestAnimationFrame(()=>{const t=e.type.includes("touch")?e.touches[0]?.clientX:e.clientX,i=e.type.includes("touch")?e.touches[0]?.clientY:e.clientY;if(void 0===t||void 0===i)return;this.lastMouseX=t,this.lastMouseY=i;const s=(t-this.startX)/this.pagesScale,n=(i-this.startY)/this.pagesScale;if("drag"===this.mode){const e=this.currentPageRect;if(e){const s=t-this.pointerOffsetDoc.x,n=i-this.pointerOffsetDoc.y,a=(s-e.left)/this.pagesScale,o=(n-e.top)/this.pagesScale;this.offsetX=a-this.object.x,this.offsetY=o-this.object.y}else this.offsetX=s,this.offsetY=n;return this.onDragMove(t,i),this.isBeingDraggedGlobally&&this.onUpdate({_globalDrag:!0,_mouseX:t,_mouseY:i}),void(this.rafId=null)}const a=16/(this.pagesScale||1);let o=this.startWidth,r=this.startHeight,l=this.startLeft,h=this.startTop;const d=this.direction.includes("right")?s:this.direction.includes("left")?-s:0;if(o=this.startWidth+d,o<a&&(o=a),r=o/this.aspectRatio,this.direction.includes("left")&&(l=this.startLeft+(this.startWidth-o),l<0)){const e=-l;l=0,o-=e,r=o/this.aspectRatio}if(this.direction.includes("top")&&(h=this.startTop+(this.startHeight-r),h<0)){const e=-h;h=0,r-=e,o=r*this.aspectRatio,this.direction.includes("left")&&(l=this.startLeft+(this.startWidth-o))}if(l+o>this.pageWidth){const e=l+o-this.pageWidth;o-=e,r=o/this.aspectRatio}if(h+r>this.pageHeight){const e=h+r-this.pageHeight;r-=e,o=r*this.aspectRatio,this.direction.includes("left")&&(l=this.startLeft+(this.startWidth-o))}this.resizeOffsetX=l-this.object.x,this.resizeOffsetY=h-this.object.y,this.resizeOffsetW=o-this.object.width,this.resizeOffsetH=r-this.object.height,this.rafId=null})))},stopInteraction(){if("idle"!==this.mode){if("drag"===this.mode&&(0!==this.offsetX||0!==this.offsetY))if(this.isBeingDraggedGlobally)this.onUpdate({_globalDrag:!0,_mouseX:this.lastMouseX,_mouseY:this.lastMouseY});else{const e=Math.max(0,Math.min(this.object.x+this.offsetX,this.pageWidth-this.object.width)),t=Math.max(0,Math.min(this.object.y+this.offsetY,this.pageHeight-this.object.height));this.onUpdate({x:e,y:t})}if("resize"===this.mode&&(0!==this.resizeOffsetW||0!==this.resizeOffsetH||0!==this.resizeOffsetX||0!==this.resizeOffsetY)){const e=this.object.x+this.resizeOffsetX,t=this.object.y+this.resizeOffsetY,i=this.object.width+this.resizeOffsetW,s=this.object.height+this.resizeOffsetH;this.onUpdate({x:e,y:t,width:i,height:s})}this.resetOffsets(),this.onDragEnd(),window.removeEventListener("mousemove",this.boundHandleMove),window.removeEventListener("mouseup",this.boundStopInteraction),window.removeEventListener("touchmove",this.boundHandleMove),window.removeEventListener("touchend",this.boundStopInteraction)}},capturePageRect(){const e=this.$el.closest(".page-wrapper");if(!e)return null;const t=e.querySelector("canvas");return t?t.getBoundingClientRect():null},resetResizeOffsets(){this.resizeOffsetX=0,this.resizeOffsetY=0,this.resizeOffsetW=0,this.resizeOffsetH=0},resetOffsets(){this.mode="idle",this.offsetX=0,this.offsetY=0,this.resetResizeOffsets(),this.pointerOffsetDoc={x:0,y:0},this.currentPageRect=null}}},b=v;var y=(0,g.A)(b,f,m,!1,null,"40fb2437",null);const w=y.exports;var x=i(1100),P=i(824);function D(e){return new Promise((t,i)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=i,s.readAsArrayBuffer(e)})}function I(e){return(0,x.YE)(e).promise}function C(e,t,i,s,n,a){return{x:Math.max(0,Math.min(e,n-i)),y:Math.max(0,Math.min(t,a-s))}}function S(e,t,i,s,n,a){const o=Math.max(0,e),r=Math.max(0,t),l=Math.min(n,e+i),h=Math.min(a,t+s);return l<=o||h<=r?0:(l-o)*(h-r)}function O(e,t,i=300){return{minY:Math.max(0,e-i),maxY:e+t+i}}function j(e,t,i,s){return!(e+t<i||e>s)}function _(e,t){e.forEach(e=>{e.pagesScale=e.pagesScale.map(()=>t)})}function M(e,t){return!(!e||!t)&&e.allObjects.some(e=>e.some(e=>e.id===t))}function E(e,t){if(e&&t)for(let i=0;i<e.allObjects.length;i++)if(e.allObjects[i].some(e=>e.id===t))return i}function A(e,t,i,s){const n=e?.allObjects?.[t];if(!n)return!1;const a=n.findIndex(e=>e.id===i);return-1!==a&&(n.splice(a,1,{...n[a],...s}),!0)}function R(e,t,i){const s=e?.allObjects?.[t];if(!s)return!1;const n=s.findIndex(e=>e.id===i);return-1!==n&&(s.splice(n,1),!0)}function $(e,t,i,s){const n=e[t];if(n)return n;const a=i.getCanvasMeasurement(),o={width:a.canvasWidth/s,height:a.canvasHeight/s};return e[t]=o,o}x.EA.workerSrc=P;const F={name:"PDFElements",components:{PDFPage:p,DraggableElement:w},props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},initFiles:{type:Array,default:()=>[]},initFileNames:{type:Array,default:()=>[]},initialScale:{type:Number,default:1},showPageFooter:{type:Boolean,default:!0},hideSelectionUI:{type:Boolean,default:!1},showSelectionHandles:{type:Boolean,default:!0},showElementActions:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},pageCountFormat:{type:String,default:"{currentPage} of {totalPages}"},autoFitZoom:{type:Boolean,default:!1}},data(){return{scale:this.initialScale,pdfDocuments:[],selectedDocIndex:-1,selectedPageIndex:-1,isAddingMode:!1,previewElement:null,previewPosition:{x:0,y:0},previewScale:{x:1,y:1},previewPageDocIndex:-1,previewPageIndex:-1,previewVisible:!1,hoverRafId:0,pendingHoverClientPos:null,lastHoverRect:null,addingListenersAttached:!1,dragRafId:0,pendingDragClientPos:null,pageBoundsVersion:0,lastScrollTop:0,lastClientWidth:0,nextObjectCounter:0,isDraggingElement:!1,draggingObject:null,draggingDocIndex:-1,draggingPageIndex:-1,draggingClientPosition:{x:0,y:0},draggingScale:1,draggingInitialMouseOffset:{x:0,y:0},draggingElementShift:{x:0,y:0},lastMouseClientPos:{x:0,y:0},viewportRafId:0,objectIndexCache:{},zoomRafId:null,wheelZoomRafId:null,boundHandleWheel:null,visualScale:this.initialScale,autoFitApplied:!1,lastContainerWidth:0}},created(){this._pagesBoundingRects={},this._pagesBoundingRectsList=[],this._pageMeasurementCache={},this._lastPageBoundsScrollTop=0,this._lastPageBoundsClientHeight=0},mounted(){this.boundHandleWheel=this.handleWheel.bind(this),this.init(),window.addEventListener("scroll",this.onViewportScroll,{passive:!0}),window.addEventListener("resize",this.onViewportScroll),this.$el?.addEventListener("scroll",this.onViewportScroll,{passive:!0}),this.$el?.addEventListener("wheel",this.boundHandleWheel,{passive:!1})},beforeUnmount(){this.zoomRafId&&cancelAnimationFrame(this.zoomRafId),this.wheelZoomRafId&&(cancelAnimationFrame(this.wheelZoomRafId),this.wheelZoomRafId=null),this.boundHandleWheel&&this.$el?.removeEventListener("wheel",this.boundHandleWheel),this.detachAddingListeners(),window.removeEventListener("scroll",this.onViewportScroll),window.removeEventListener("resize",this.onViewportScroll),this.$el?.removeEventListener("scroll",this.onViewportScroll),this.viewportRafId&&(window.cancelAnimationFrame(this.viewportRafId),this.viewportRafId=0),this.hoverRafId&&(window.cancelAnimationFrame(this.hoverRafId),this.hoverRafId=0),this.dragRafId&&(window.cancelAnimationFrame(this.dragRafId),this.dragRafId=0)},methods:{async init(){if(!this.initFiles||0===this.initFiles.length)return;const e=[];this.autoFitApplied=!1;for(let t=0;t<this.initFiles.length;t++){const i=this.initFiles[t],s=this.initFileNames[t]||`document-${t+1}.pdf`;let n;if(i instanceof Blob){const e=await D(i);n=await I({data:e})}else n=await I(i);const a=[],o=Array(n.numPages).fill(0);for(let e=1;e<=n.numPages;e++){const t=n.getPage(e);t.then(t=>{o.splice(e-1,1,t.getViewport({scale:1}).width),this.autoFitZoom&&this.scheduleAutoFitZoom()}),a.push(t)}e.push({name:s,file:i,pdfDoc:n,numPages:n.numPages,pages:a,pageWidths:o,pagesScale:Array(n.numPages).fill(this.scale),allObjects:Array(n.numPages).fill(0).map(()=>[])})}this.pdfDocuments=e,this._pageMeasurementCache={},e.length&&(this.selectedDocIndex=0,this.selectedPageIndex=0,this.$emit("pdf-elements:end-init",{docsCount:e.length}),this.$nextTick(()=>{this.autoFitZoom&&this.scheduleAutoFitZoom()}))},selectPage(e,t){this.selectedDocIndex=e,this.selectedPageIndex=t},startDraggingElement(e,t,i,s,n,a,o){this.isDraggingElement=!0,this.draggingObject={...i},this.draggingDocIndex=e,this.draggingPageIndex=t,this.draggingScale=this.getDisplayedPageScale(e,t),this.lastMouseClientPos.x=s,this.lastMouseClientPos.y=n,this.draggingElementShift=o&&"number"===typeof o.x&&"number"===typeof o.y?o:{x:0,y:0},this.cachePageBounds();const r=this.getPageRect(e,t);if(a&&"number"===typeof a.x&&"number"===typeof a.y)this.draggingInitialMouseOffset.x=a.x,this.draggingInitialMouseOffset.y=a.y,this.draggingClientPosition.x=s-this.draggingInitialMouseOffset.x,this.draggingClientPosition.y=n-this.draggingInitialMouseOffset.y;else if(r){const e=r.left+i.x*this.draggingScale,t=r.top+i.y*this.draggingScale;this.draggingInitialMouseOffset.x=s-e,this.draggingInitialMouseOffset.y=n-t,this.draggingClientPosition.x=s-this.draggingInitialMouseOffset.x,this.draggingClientPosition.y=n-this.draggingInitialMouseOffset.y}},updateDraggingPosition(e,t){this.isDraggingElement&&(this.pendingDragClientPos={x:e,y:t},this.dragRafId||(this.dragRafId=window.requestAnimationFrame(()=>{this.dragRafId=0;const e=this.pendingDragClientPos;e&&(this.lastMouseClientPos.x=e.x,this.lastMouseClientPos.y=e.y,this.draggingClientPosition.x=e.x-this.draggingInitialMouseOffset.x,this.draggingClientPosition.y=e.y-this.draggingInitialMouseOffset.y)})))},stopDraggingElement(){if(this.draggingObject){const e=this.draggingObject.id,t=this.draggingDocIndex,i=this.checkAndMoveObjectPage(this.draggingDocIndex,e,this.lastMouseClientPos.x,this.lastMouseClientPos.y);void 0!==i&&this.$nextTick(()=>{this.selectPage(t,i);const s=`draggable${t}-${i}-${e}`,n=this.$refs[s];n&&Array.isArray(n)&&n[0]&&(n[0].isSelected=!0)})}this.isDraggingElement=!1,this.draggingObject=null,this.draggingDocIndex=-1,this.draggingPageIndex=-1,this.draggingElementShift={x:0,y:0},this.pendingDragClientPos=null},startAddingElement(e){this.pdfDocuments.length&&(this.attachAddingListeners(),this.isAddingMode=!0,this.previewElement={...e},this.previewPageDocIndex=0,this.previewPageIndex=0,this.previewVisible=!1,this.previewScale={x:1,y:1},this.cachePageBounds())},cachePageBounds(){const e={},t=this.$el,i=t?.scrollTop||0,s=t?.clientHeight||0;if(!this.isAddingMode&&!this.isDraggingElement&&i===this._lastPageBoundsScrollTop&&s===this._lastPageBoundsClientHeight)return;this._lastPageBoundsScrollTop=i,this._lastPageBoundsClientHeight=s;const{minY:n,maxY:a}=O(i,s);for(let o=0;o<this.pdfDocuments.length;o++)for(let t=0;t<this.pdfDocuments[o].pages.length;t++){const i=this.getPageCanvasElement(o,t);if(!i)continue;if(s){const e=i.closest(".page-wrapper")||i,t=e.offsetTop||0,s=e.offsetHeight||0;if(!j(t,s,n,a))continue}const r=i.getBoundingClientRect();e[`${o}-${t}`]={docIndex:o,pageIndex:t,rect:r}}this._pagesBoundingRects=e,this._pagesBoundingRectsList=Object.values(e),this.pageBoundsVersion++},cachePageBoundsForPage(e,t){const i=this.getPageCanvasElement(e,t);if(!i)return;const s=i.getBoundingClientRect();this._pagesBoundingRects={...this._pagesBoundingRects,[`${e}-${t}`]:{docIndex:e,pageIndex:t,rect:s}},this._pagesBoundingRectsList=Object.values(this._pagesBoundingRects),this.pageBoundsVersion++},getPageBoundsMap(){return this._pagesBoundingRects||{}},getPageBoundsList(){return this._pagesBoundingRectsList||[]},getPageRect(e,t){return this.getPageBoundsMap()[`${e}-${t}`]?.rect||null},getPointerPosition(e){return e?.type?.includes?.("touch")?{x:e.touches?.[0]?.clientX,y:e.touches?.[0]?.clientY}:{x:e?.clientX,y:e?.clientY}},getDisplayedPageScale(e,t){this.pageBoundsVersion;const i=this.pdfDocuments[e];if(!i)return 1;const s=i.pageWidths?.[t]||0,n=this.getPageBoundsMap();n[`${e}-${t}`]||this.cachePageBoundsForPage(e,t);const a=this.getPageBoundsMap()[`${e}-${t}`]?.rect?.width||0;if(a&&s)return a/s;if(this.isAddingMode||this.isDraggingElement){const i=this.getPageCanvasElement(e,t),n=i?.getBoundingClientRect?.().width||0;if(n&&s)return n/s}const o=i.pagesScale[t]||1,r=this.visualScale&&this.scale?this.visualScale/this.scale:1;return o*r},getPageComponent(e,t){const i=this.$refs[`page${e}-${t}`];return i&&Array.isArray(i)&&i[0]?i[0]:null},getPageCanvasElement(e,t){const i=this.getPageComponent(e,t);return i?i.$el||i:null},onViewportScroll(){this.viewportRafId||(this.viewportRafId=window.requestAnimationFrame(()=>{const e=this.$el,t=e?.scrollTop||0,i=e?.clientWidth||0,s=t!==this.lastScrollTop,n=i!==this.lastClientWidth;this.lastScrollTop=t,this.lastClientWidth=i,(this.isAddingMode||this.isDraggingElement)&&(s||n)&&this.cachePageBounds(),!this.autoFitZoom||this.isAddingMode||this.isDraggingElement||i&&n&&(this.lastContainerWidth=i,this.autoFitApplied=!1,this.scheduleAutoFitZoom()),this.viewportRafId=0}))},handleMouseMove(e){if(!this.isAddingMode||!this.previewElement)return;const{x:t,y:i}=this.getPointerPosition(e);void 0!==t&&void 0!==i&&(this.pendingHoverClientPos={x:t,y:i},this.hoverRafId||(this.hoverRafId=window.requestAnimationFrame(()=>{this.hoverRafId=0;const e=this.pendingHoverClientPos;if(!e)return;const t=e.x,i=e.y;let s=null;if(this.lastHoverRect&&t>=this.lastHoverRect.left&&t<=this.lastHoverRect.right&&i>=this.lastHoverRect.top&&i<=this.lastHoverRect.bottom)s={docIndex:this.previewPageDocIndex,pageIndex:this.previewPageIndex,rect:this.lastHoverRect};else{const e=this.getPageBoundsList().length?this.getPageBoundsList():Object.values(this.getPageBoundsMap());for(let n=0;n<e.length;n++){const a=e[n],o=a.rect;if(t>=o.left&&t<=o.right&&i>=o.top&&i<=o.bottom){s=a;break}}}if(!s)return this.previewVisible=!1,this.previewScale={x:1,y:1},void(this.lastHoverRect=null);this.previewPageDocIndex=s.docIndex,this.previewPageIndex=s.pageIndex,this.lastHoverRect=s.rect;const n=this.getPageCanvasElement(s.docIndex,s.pageIndex),a=this.pdfDocuments[s.docIndex]?.pagesScale?.[s.pageIndex]||1,o=n?.width||s.rect.width,r=n?.height||s.rect.height,l=o?s.rect.width/o:1,h=r?s.rect.height/r:1,d=(t-s.rect.left)/l/a,c=(i-s.rect.top)/h/a,g=o/a,u=r/a;this.previewScale.x=a,this.previewScale.y=a;let p=d-this.previewElement.width/2,f=c-this.previewElement.height/2;p=Math.max(0,Math.min(p,g-this.previewElement.width)),f=Math.max(0,Math.min(f,u-this.previewElement.height)),this.previewPosition.x=p,this.previewPosition.y=f,this.previewVisible=!0})))},handleKeyDown(e){"Escape"===e.key&&this.isAddingMode&&this.cancelAdding()},handleWheel(e){if(!e.ctrlKey)return;e.preventDefault();const t=1-.002*e.deltaY,i=Math.max(.5,Math.min(3,this.visualScale*t));this.visualScale=i,this.wheelZoomRafId||(this.wheelZoomRafId=window.requestAnimationFrame(()=>{this.wheelZoomRafId=null,this.commitZoom()}))},commitZoom(){const e=this.visualScale;this.scale=e,_(this.pdfDocuments,this.scale),this._pageMeasurementCache={},this.cachePageBounds()},finishAdding(){if(!this.isAddingMode||!this.previewElement)return;if(!this.previewVisible)return;const e={...this.previewElement,id:this.generateObjectId(),x:Math.round(this.previewPosition.x),y:Math.round(this.previewPosition.y)},t=this.pdfDocuments[this.previewPageDocIndex],i=this.getPageWidth(this.previewPageDocIndex,this.previewPageIndex),s=this.getPageHeight(this.previewPageDocIndex,this.previewPageIndex);if(e.x<0||e.y<0||e.x+e.width>i||e.y+e.height>s)return void this.cancelAdding();t.allObjects[this.previewPageIndex].push(e);const n=this.previewPageIndex,a=this.previewPageDocIndex,o=e.id;this.cancelAdding(),this.$nextTick(()=>{const e=`draggable${a}-${n}-${o}`,t=this.$refs[e];t&&Array.isArray(t)&&t[0]&&(t[0].isSelected=!0)})},cancelAdding(){this.isAddingMode=!1,this.previewElement=null,this.previewVisible=!1,this.detachAddingListeners()},generateObjectId(){const e=this.nextObjectCounter++,t=Math.random().toString(36).slice(2,8);return`obj-${Date.now()}-${e}-${t}`},attachAddingListeners(){this.addingListenersAttached||(this.addingListenersAttached=!0,document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove,{passive:!0}),document.addEventListener("mouseup",this.finishAdding),document.addEventListener("touchend",this.finishAdding),document.addEventListener("keydown",this.handleKeyDown))},detachAddingListeners(){this.addingListenersAttached&&(this.addingListenersAttached=!1,document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove,{passive:!0}),document.removeEventListener("mouseup",this.finishAdding),document.removeEventListener("touchend",this.finishAdding),document.removeEventListener("keydown",this.handleKeyDown))},addObjectToPage(e,t=this.selectedPageIndex,i=this.selectedDocIndex){if(i<0||i>=this.pdfDocuments.length)return!1;if(t<0||t>=this.pdfDocuments[i].pages.length)return!1;const s=this.pdfDocuments[i],n=this.getPageComponent(i,t);if(!n)return!1;let a=e;a.id&&!this.objectIdExists(i,a.id)||(a={...a,id:this.generateObjectId()});const o=this.getPageWidth(i,t),r=this.getPageHeight(i,t);return!(a.x<0||a.y<0||a.x+a.width>o||a.y+a.height>r)&&(s.allObjects[t].push(a),this.objectIndexCache[`${i}-${a.id}`]=t,!0)},objectIdExists(e,t){if(!t)return!1;const i=`${e}-${t}`;if(void 0!==this.objectIndexCache[i])return!0;const s=this.pdfDocuments[e];return M(s,t)},updateObjectInPage(e,t,i,s){const n=this.pdfDocuments[e];A(n,t,i,s)},removeObjectFromPage(e,t,i){const s=this.pdfDocuments[e];R(s,t,i)},getAllObjects(e=this.selectedDocIndex){if(e<0||e>=this.pdfDocuments.length)return[];const t=this.pdfDocuments[e],i=[];return t.allObjects.forEach((s,n)=>{const a=this.getPageComponent(e,n);if(!a)return;const o=this.getCachedMeasurement(e,n,a),r=o.height,l=t.pagesScale[n]||1;s.forEach(e=>{i.push({...e,pageIndex:n,pageNumber:n+1,scale:l,normalizedCoordinates:{llx:parseInt(e.x,10),lly:parseInt(r-e.y,10),ury:parseInt(r-e.y-e.height,10),width:parseInt(e.width,10),height:parseInt(e.height,10)}})})}),i},updateObject(e,t,i){if(e<0||e>=this.pdfDocuments.length)return;const s=this.pdfDocuments[e],n=`${e}-${t}`;let a=this.objectIndexCache[n];if(void 0===a&&(a=E(s,t),void 0!==a&&(this.objectIndexCache[n]=a)),void 0===a)return;const o=s.allObjects[a]?.find(e=>e.id===t);if(o){if(i._globalDrag&&void 0!==i._mouseX&&void 0!==i._mouseY){const s=i._mouseX,n=i._mouseY,o=this.getPageBoundsMap();o&&0!==Object.keys(o).length||this.cachePageBounds();const r=this.getPageRect(e,a);if(r){const i=this.getDisplayedPageScale(e,a),o=(s-r.left-this.draggingElementShift.x)/i-this.draggingInitialMouseOffset.x/i,l=(n-r.top-this.draggingElementShift.y)/i-this.draggingInitialMouseOffset.y/i;this.updateObjectInPage(e,a,t,{x:o,y:l})}return}if(void 0!==i.x||void 0!==i.y){const n=void 0!==i.x?i.x:o.x,r=void 0!==i.y?i.y:o.y,l=void 0!==i.width?i.width:o.width,h=void 0!==i.height?i.height:o.height,{width:d,height:c}=this.getPageSize(e,a);if(n>=0&&r>=0&&n+l<=d&&r+h<=c)return void this.updateObjectInPage(e,a,t,i);let g=a,u=0;for(let t=0;t<s.pages.length;t++){const i=this.getPageWidth(e,t),s=this.getPageHeight(e,t),a=S(n,r,l,h,i,s);a>u&&(u=a,g=t)}if(g!==a){const{width:d,height:c}=this.getPageSize(e,g),{x:u,y:p}=C(n,r,l,h,d,c);this.removeObjectFromPage(e,a,t);const f={...o,...i,x:u,y:p};return s.allObjects[g].push(f),void(this.objectIndexCache[`${e}-${t}`]=g)}const{width:p,height:f}=this.getPageSize(e,a);if(n<0||r<0||n+l>p||r+h>f)return}this.updateObjectInPage(e,a,t,i)}},deleteObject(e,t){if(e<0||e>=this.pdfDocuments.length)return;const i=this.pdfDocuments[e];let s=null,n=-1;i.allObjects.some((e,i)=>{const a=e.findIndex(e=>e.id===t);return-1!==a&&(s=e[a],n=i,e.splice(a,1),!0)}),delete this.objectIndexCache[`${e}-${t}`],s&&this.$emit("pdf-elements:delete-object",{object:s,docIndex:e,pageIndex:n})},checkAndMoveObjectPage(e,t,i,s){if(e<0||e>=this.pdfDocuments.length)return;const n=this.pdfDocuments[e],a=`${e}-${t}`;let o=this.objectIndexCache[a];if(void 0===o&&(o=E(n,t),void 0!==o&&(this.objectIndexCache[a]=o)),void 0===o)return;const r=n.allObjects[o]?.find(e=>e.id===t);if(!r)return o;let l=o;const h=this.getPageBoundsMap();for(const b in h){const{docIndex:t,pageIndex:n,rect:a}=h[b];if(t===e&&i>=a.left&&i<=a.right&&s>=a.top&&s<=a.bottom){l=n;break}}const d=this.getPageRect(e,l);if(!d)return o;const c=this.getDisplayedPageScale(e,l),g=(i-d.left-this.draggingElementShift.x)/c-this.draggingInitialMouseOffset.x/c,u=(s-d.top-this.draggingElementShift.y)/c-this.draggingInitialMouseOffset.y/c,{width:p,height:f}=this.getPageSize(e,l),{x:m,y:v}=C(g,u,r.width,r.height,p,f);return l!==o?(this.removeObjectFromPage(e,o,t),n.allObjects[l].push({...r,x:m,y:v}),this.objectIndexCache[a]=l):m===r.x&&v===r.y||this.updateObjectInPage(e,o,t,{x:m,y:v}),l},onMeasure(e,t,i){t<0||t>=this.pdfDocuments.length||(this.pdfDocuments[t].pagesScale.splice(i,1,e.scale),this._pageMeasurementCache[`${t}-${i}`]=null,this.cachePageBoundsForPage(t,i),this.autoFitZoom&&this.scheduleAutoFitZoom())},formatPageNumber(e,t){return this.pageCountFormat.replace("{currentPage}",e).replace("{totalPages}",t)},getPageWidth(e,t){const i=this.getPageComponent(e,t);if(!i)return 0;const s=this.getCachedMeasurement(e,t,i);return s.width},getPageHeight(e,t){const i=this.getPageComponent(e,t);if(!i)return 0;const s=this.getCachedMeasurement(e,t,i);return s.height},getPageSize(e,t){return{width:this.getPageWidth(e,t),height:this.getPageHeight(e,t)}},getCachedMeasurement(e,t,i){const s=`${e}-${t}`,n=this.pdfDocuments[e],a=n.pagesScale[t]||1;return $(this._pageMeasurementCache,s,i,a)},calculateOptimalScale(e){const t=this.$el?.clientWidth||0;if(!t||!e)return 1;const i=t-40;return Math.max(.1,Math.min(2,i/e))},scheduleAutoFitZoom(){this.autoFitApplied||this.zoomRafId||(this.zoomRafId=window.requestAnimationFrame(()=>{this.zoomRafId=0,this.adjustZoomToFit()}))},adjustZoomToFit(){if(!this.autoFitZoom||this.autoFitApplied||!this.pdfDocuments.length)return;const e=this.pdfDocuments.flatMap(e=>e.pageWidths||[]).filter(e=>e>0);let t=0;if(e.length)t=Math.max(...e);else{if(this.autoFitZoom)return void this.scheduleAutoFitZoom();const e=this.$el?.querySelectorAll("canvas");if(!e?.length)return;t=Math.max(...Array.from(e).map(e=>e.width/(this.scale||1)))}const i=this.calculateOptimalScale(t);this.autoFitApplied=!0,Math.abs(i-this.scale)>.01&&(this.scale=i,this.visualScale=i,_(this.pdfDocuments,this.scale),this._pageMeasurementCache={},this.cachePageBounds())}}},z=F;var B=(0,g.A)(z,o,r,!1,null,"ec3a4e5e",null);const L=B.exports;L.install=function(e){L.install.installed||e.component(L.name,L)},"undefined"!==typeof window&&window.Vue&&L.install(window.Vue);const k=L;var H=function(){var e=this,t=e._self._c;return t("header",{staticClass:"toolbar"},[t("div",{staticClass:"actions"},[t("button",{staticClass:"btn",attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("load-sample")}}},[e._v(" Load sample PDF ")]),t("label",{staticClass:"btn file-btn",class:{disabled:e.loading}},[t("input",{attrs:{type:"file",accept:"application/pdf",multiple:"",disabled:e.loading},on:{change:function(t){return e.$emit("files-change",t)}}}),e._v(" Add PDFs ")]),t("button",{staticClass:"btn",attrs:{disabled:!e.isReady||e.isAddingElement},on:{click:function(t){return e.$emit("add-signature")}}},[e._v(" "+e._s(e.isAddingElement?"Click to place":"Add Signature")+" ")]),t("button",{staticClass:"btn ghost",attrs:{disabled:!e.isReady},on:{click:function(t){return e.$emit("show-objects")}}},[e._v(" List objects ")]),t("button",{staticClass:"btn ghost",attrs:{disabled:!e.isReady},on:{click:function(t){return e.$emit("clear-all")}}},[e._v(" Clear all ")])]),t("p",{staticClass:"hint"},[e._v(' Click "Add Signature" then move mouse over PDF pages to preview position. Click to place on a page or press ESC to cancel. ')])])},W=[];const Y={name:"AppToolbar",props:{loading:{type:Boolean,default:!1},isReady:{type:Boolean,default:!1},isAddingElement:{type:Boolean,default:!1}}},T=Y;var X=(0,g.A)(T,H,W,!1,null,"bf48ab7e",null);const V=X.exports;var Z=function(){var e=this,t=e._self._c;return e.documents.length?t("section",{staticClass:"docs-list"},[t("h3",[e._v("Documents ("+e._s(e.documents.length)+")")]),t("ul",e._l(e.documents,function(i,s){return t("li",{key:s},[e._v(" "+e._s(i)+" "),t("button",{staticClass:"remove-doc",attrs:{title:"Remove"},on:{click:function(t){return e.$emit("remove",s)}}},[e._v("×")])])}),0)]):e._e()},N=[];const q={name:"DocumentsList",props:{documents:{type:Array,default:()=>[]}}},U=q;var K=(0,g.A)(U,Z,N,!1,null,"3497c0c2",null);const G=K.exports;var J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"signature-box"},["signature"===e.object.icon?t("svg",{staticClass:"icon",attrs:{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}})]):e._e(),t("span",{staticClass:"label"},[e._v(e._s(e.object.label))])])},Q=[];const ee={name:"SignatureBox",props:{object:{type:Object,required:!0},fontSize:{type:String,default:"14px"}}},te=ee;var ie=(0,g.A)(te,J,Q,!1,null,"aa72d0a2",null);const se=ie.exports;var ne=function(){var e=this,t=e._self._c;return t("button",{staticClass:"delete-btn",attrs:{type:"button",title:"Delete"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}},[t("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"}},[t("path",{attrs:{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.5a.5.5 0 0 0 0 1h.5v10.5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5V3.5h.5a.5.5 0 0 0 0-1H11Zm1 1v10.5a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V3.5h8Z"}})])])},ae=[];const oe={name:"DeleteButton"},re=oe;var le=(0,g.A)(re,ne,ae,!1,null,"47ad8434",null);const he=le.exports;var de=function(){var e=this,t=e._self._c;return e.isOpen?t("div",{staticClass:"modal-overlay",on:{click:e.close}},[t("div",{staticClass:"modal-content",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"modal-header"},[t("h2",[e._v("Elements Details")]),t("button",{staticClass:"close-btn",on:{click:e.close}},[e._v("×")])]),0===e.elements.length?t("div",{staticClass:"empty-state"},[t("p",[e._v("No elements added yet.")]),t("p",[e._v('Click "Add Signature" to add elements to your PDF.')])]):t("div",{staticClass:"elements-list"},[t("table",[e._m(0),t("tbody",e._l(e.elements,function(i){return t("tr",{key:i.id,staticClass:"element-row"},[t("td",{staticClass:"doc-name"},[e._v(e._s(i.docName))]),t("td",{staticClass:"page-num"},[e._v(e._s(i.pageNum))]),t("td",{staticClass:"type-badge"},[t("span",{class:`badge badge-${i.type}`},[e._v(e._s(i.type||"custom"))])]),t("td",{staticClass:"label"},[e._v(e._s(i.label||"—"))]),t("td",{staticClass:"id",attrs:{title:i.id}},[e._v(e._s(i.id.substring(0,12))+"…")]),t("td",{staticClass:"position"},[e._v(e._s(i.x)+", "+e._s(i.y))]),t("td",{staticClass:"size"},[e._v(e._s(i.width)+"×"+e._s(i.height))])])}),0)])]),t("div",{staticClass:"modal-footer"},[e._m(1),t("button",{staticClass:"btn",on:{click:e.close}},[e._v("Close")])])])]):e._e()},ce=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Document")]),t("th",[e._v("Page")]),t("th",[e._v("Type")]),t("th",[e._v("Label")]),t("th",[e._v("ID")]),t("th",[e._v("Position")]),t("th",[e._v("Size")])])])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"info-text"},[t("strong",[e._v("How to integrate:")]),e._v(" Call "),t("code",[e._v("pdf.getAllObjects()")]),e._v(" to get all elements or access individual document data via "),t("code",[e._v("pdf.pdfDocuments")])])}];const ge={name:"ElementsViewer",props:{isOpen:{type:Boolean,default:!1},documents:{type:Array,default:()=>[]}},computed:{elements(){const e=[];for(let t=0;t<this.documents.length;t++){const i=this.documents[t];if(i.allObjects)for(let s=0;s<i.allObjects.length;s++){const n=i.allObjects[s];for(const a of n)e.push({docName:i.name||`Document ${t+1}`,pageNum:s+1,type:a.type||"custom",label:a.label||"",id:a.id,x:Math.round(a.x),y:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)})}}return e}},methods:{close(){this.$emit("close")}}},ue=ge;var pe=(0,g.A)(ue,de,ce,!1,null,"d57856a8",null);const fe=pe.exports,me={name:"App",components:{PDFElements:k,AppToolbar:V,DocumentsList:G,SignatureBox:se,DeleteButton:he,ElementsViewer:fe},data(){return{initFiles:["https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"],fileNames:["sample.pdf"],componentKey:0,loading:!1,pdfReady:!1,showElementsViewer:!1,isAddingElement:!1}},computed:{isReady(){return this.pdfReady&&!!this.$refs.pdf},pdf(){return this.$refs.pdf||null}},methods:{onReady(){this.loading=!1,this.pdfReady=!0},loadSample(){this.loading=!0,this.pdfReady=!1,this.initFiles=["https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"],this.fileNames=["sample.pdf"],this.forceRenderDocuments()},onFilesChange(e){const t=Array.from(e.target.files||[]);0!==t.length&&(this.loading=!0,this.pdfReady=!1,this.initFiles=[...this.initFiles,...t],this.fileNames=[...this.fileNames,...t.map(e=>e.name)],this.forceRenderDocuments(),e.target.value="")},removeDocument(e){this.initFiles=this.initFiles.filter((t,i)=>i!==e),this.fileNames=this.fileNames.filter((t,i)=>i!==e),0===this.initFiles.length&&(this.pdfReady=!1),this.forceRenderDocuments()},clearAll(){confirm("Clear all documents and objects?")&&(this.initFiles=[],this.fileNames=[],this.pdfReady=!1,this.forceRenderDocuments())},forceRenderDocuments(){this.componentKey+=1},startAddingSignature(){const e=this.$refs.pdf;e&&(this.isAddingElement=!0,e.startAddingElement({width:160,height:48,type:"signature",label:"Signature",icon:"signature"}),this.$nextTick(()=>{const t=()=>{!1===e.isAddingMode&&this.isAddingElement?this.isAddingElement=!1:!0===e.isAddingMode&&requestAnimationFrame(t)};requestAnimationFrame(t)}))},getResponsiveFontSize(e){const t=6,i=14,s=160,n=48,a=Math.min(e.width/s,e.height/n),o=Math.sqrt(a),r=Math.max(t,Math.min(i,i*o));return`${r}px`},showObjects(){this.showElementsViewer=!0}}};s.Ay.config.productionTip=!1;const ve=me;var be=(0,g.A)(ve,n,a,!1,null,"11a3043c",null);const ye=be.exports;s.Ay.config.productionTip=!1,new s.Ay({render:e=>e(ye)}).$mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,i),a.exports}i.m=e,(()=>{var e=[];i.O=(t,s,n,a)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,n,a]=e[d],r=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every(e=>i.O[e](s[l]))?s.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(d--,1);var h=n();void 0!==h&&(t=h)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,n,a]}})(),(()=>{i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{i.p="/pdf-elements/"})(),(()=>{var e={57:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[o,r,l]=s,h=0;if(o.some(t=>0!==e[t])){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var d=l(i)}for(t&&t(s);h<o.length;h++)a=o[h],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},s=globalThis["webpackChunk_libresign_pdf_elements"]=globalThis["webpackChunk_libresign_pdf_elements"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=i.O(void 0,[504],()=>i(5316));s=i.O(s)})();
//# sourceMappingURL=index.8fa1a66d.js.map